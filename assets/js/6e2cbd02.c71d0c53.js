"use strict";(self.webpackChunkwebsite_new=self.webpackChunkwebsite_new||[]).push([[8069],{85356(e,n,r){r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"reference/firmware","title":"Firmware Compatibility","description":"This page documents firmware compatibility for laser controllers used with Rayforge.","source":"@site/docs/reference/firmware.md","sourceDirName":"reference","slug":"/reference/firmware","permalink":"/docs/reference/firmware","draft":false,"unlisted":false,"editUrl":"https://github.com/barebaric/rayforge/tree/main/website/docs/docs/reference/firmware.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"G-code Dialect Support","permalink":"/docs/reference/gcode-dialects"}}');var s=r(74848),l=r(28453);const d={},c="Firmware Compatibility",t={},o=[{value:"Overview",id:"overview",level:2},{value:"Compatibility Matrix",id:"compatibility-matrix",level:3},{value:"GRBL Firmware",id:"grbl-firmware",level:2},{value:"GRBL 1.1 (Recommended)",id:"grbl-11-recommended",level:3},{value:"Checking GRBL Version",id:"checking-grbl-version",level:3},{value:"GRBL 0.9 (Older)",id:"grbl-09-older",level:3},{value:"grblHAL",id:"grblhal",level:2},{value:"What is grblHAL?",id:"what-is-grblhal",level:3},{value:"Smoothieware",id:"smoothieware",level:2},{value:"Compatibility Notes",id:"compatibility-notes",level:3},{value:"Marlin",id:"marlin",level:2},{value:"Marlin for Laser",id:"marlin-for-laser",level:3},{value:"Firmware Upgrade Guide",id:"firmware-upgrade-guide",level:2},{value:"Upgrading to GRBL 1.1",id:"upgrading-to-grbl-11",level:3},{value:"Backup Before Upgrade",id:"backup-before-upgrade",level:3},{value:"Controller Hardware",id:"controller-hardware",level:2},{value:"Common Controllers",id:"common-controllers",level:3},{value:"Recommended Controllers",id:"recommended-controllers",level:3},{value:"Firmware Configuration",id:"firmware-configuration",level:2},{value:"GRBL Settings for Laser",id:"grbl-settings-for-laser",level:3},{value:"Testing Firmware",id:"testing-firmware",level:3},{value:"Troubleshooting Firmware Issues",id:"troubleshooting-firmware-issues",level:2},{value:"Firmware Not Responding",id:"firmware-not-responding",level:3},{value:"Firmware Crashes",id:"firmware-crashes",level:3},{value:"Wrong Firmware",id:"wrong-firmware",level:3},{value:"Future Firmware Support",id:"future-firmware-support",level:2},{value:"Requested Features",id:"requested-features",level:3},{value:"Contributing",id:"contributing",level:3},{value:"Related Pages",id:"related-pages",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"firmware-compatibility",children:"Firmware Compatibility"})}),"\n",(0,s.jsx)(n.p,{children:"This page documents firmware compatibility for laser controllers used with Rayforge."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Rayforge is designed primarily for ",(0,s.jsx)(n.strong,{children:"GRBL-based controllers"})," but has experimental support for other firmware types."]}),"\n",(0,s.jsx)(n.h3,{id:"compatibility-matrix",children:"Compatibility Matrix"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Firmware"}),(0,s.jsx)(n.th,{children:"Version"}),(0,s.jsx)(n.th,{children:"Status"}),(0,s.jsx)(n.th,{children:"Driver"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"GRBL"})}),(0,s.jsx)(n.td,{children:"1.1+"}),(0,s.jsx)(n.td,{children:"Fully supported"}),(0,s.jsx)(n.td,{children:"GRBL Serial"}),(0,s.jsx)(n.td,{children:"Recommended"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"grblHAL"})}),(0,s.jsx)(n.td,{children:"2023+"}),(0,s.jsx)(n.td,{children:"Compatible"}),(0,s.jsx)(n.td,{children:"GRBL Serial"}),(0,s.jsx)(n.td,{children:"Modern GRBL fork"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"GRBL"})}),(0,s.jsx)(n.td,{children:"0.9"}),(0,s.jsx)(n.td,{children:"Limited"}),(0,s.jsx)(n.td,{children:"GRBL Serial"}),(0,s.jsx)(n.td,{children:"Older, may have issues"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Smoothieware"})}),(0,s.jsx)(n.td,{children:"All"}),(0,s.jsx)(n.td,{children:"Experimental"}),(0,s.jsx)(n.td,{children:"None (use GRBL driver)"}),(0,s.jsx)(n.td,{children:"Untested"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Marlin"})}),(0,s.jsx)(n.td,{children:"2.0+"}),(0,s.jsx)(n.td,{children:"Experimental"}),(0,s.jsx)(n.td,{children:"None (use GRBL driver)"}),(0,s.jsx)(n.td,{children:"Laser mode required"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Other"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Not supported"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Request support"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"grbl-firmware",children:"GRBL Firmware"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," \x13 Fully Supported\n",(0,s.jsx)(n.strong,{children:"Versions:"})," 1.1+\n",(0,s.jsx)(n.strong,{children:"Driver:"})," GRBL Serial"]}),"\n",(0,s.jsx)(n.h3,{id:"grbl-11-recommended",children:"GRBL 1.1 (Recommended)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What is GRBL 1.1?"})}),"\n",(0,s.jsx)(n.p,{children:"GRBL 1.1 is the most common firmware for hobby CNC and laser machines. Released in 2017, it's stable, well-documented, and widely supported."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Features supported by Rayforge:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Serial communication (USB)"}),"\n",(0,s.jsx)(n.li,{children:"Real-time status reporting"}),"\n",(0,s.jsx)(n.li,{children:"Laser mode (M4 constant power)"}),"\n",(0,s.jsx)(n.li,{children:"Settings read/write ($$, $X=value)"}),"\n",(0,s.jsx)(n.li,{children:"Homing cycles ($H)"}),"\n",(0,s.jsx)(n.li,{children:"Work coordinate systems (G54)"}),"\n",(0,s.jsx)(n.li,{children:"Jogging commands ($J=)"}),"\n",(0,s.jsx)(n.li,{children:"Feed rate override"}),"\n",(0,s.jsx)(n.li,{children:"Soft limits"}),"\n",(0,s.jsx)(n.li,{children:"Hard limits (endstops)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Known limitations:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Power range: 0-1000 (S parameter)"}),"\n",(0,s.jsx)(n.li,{children:"No network connectivity (USB only)"}),"\n",(0,s.jsx)(n.li,{children:"Limited onboard memory (small G-code buffer)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"checking-grbl-version",children:"Checking GRBL Version"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query version:"})}),"\n",(0,s.jsx)(n.p,{children:"Connect to your controller and send:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$I\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[VER:1.1h.20190825:]\n[OPT:V,15,128]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"1.1h"})," = GRBL version 1.1h"]}),"\n",(0,s.jsx)(n.li,{children:"Date indicates build"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"grbl-09-older",children:"GRBL 0.9 (Older)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," Limited Support"]}),"\n",(0,s.jsx)(n.p,{children:"GRBL 0.9 is an older version with some compatibility issues:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Differences:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Different status report format"}),"\n",(0,s.jsx)(n.li,{children:"No laser mode (M4) - uses M3 only"}),"\n",(0,s.jsx)(n.li,{children:"Fewer settings"}),"\n",(0,s.jsx)(n.li,{children:"Different jogging syntax"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"If you have GRBL 0.9:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Upgrade to GRBL 1.1"})," if possible (recommended)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use M3 instead of M4"})," (less predictable power)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test thoroughly"})," - some features may not work"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Upgrade instructions:"})," See ",(0,s.jsx)(n.a,{href:"https://github.com/gnea/grbl/wiki",children:"GRBL Wiki"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"grblhal",children:"grblHAL"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," Compatible\n",(0,s.jsx)(n.strong,{children:"Versions:"})," 2023+\n",(0,s.jsx)(n.strong,{children:"Driver:"})," GRBL Serial"]}),"\n",(0,s.jsx)(n.h3,{id:"what-is-grblhal",children:"What is grblHAL?"}),"\n",(0,s.jsx)(n.p,{children:"grblHAL is a modern fork of GRBL with enhanced features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multiple controller hardware support (STM32, ESP32, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Ethernet/WiFi networking"}),"\n",(0,s.jsx)(n.li,{children:"SD card support"}),"\n",(0,s.jsx)(n.li,{children:"More I/O pins"}),"\n",(0,s.jsx)(n.li,{children:"Enhanced laser support"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Compatibility with Rayforge:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fully compatible"})," - grblHAL maintains GRBL 1.1 protocol"]}),"\n",(0,s.jsx)(n.li,{children:"All GRBL features work"}),"\n",(0,s.jsx)(n.li,{children:"Additional features (networking, SD) not yet supported by Rayforge"}),"\n",(0,s.jsx)(n.li,{children:"Status reporting identical to GRBL"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using grblHAL:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Select "GRBL Serial" driver in Rayforge'}),"\n",(0,s.jsx)(n.li,{children:"Connect via USB serial (just like GRBL)"}),"\n",(0,s.jsx)(n.li,{children:"All features work as documented for GRBL"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Future:"})," Rayforge may add support for grblHAL-specific features (networking, etc.)"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"smoothieware",children:"Smoothieware"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Versions:"})," All\n",(0,s.jsx)(n.strong,{children:"Driver:"})," GRBL Serial (compatibility mode)"]}),"\n",(0,s.jsx)(n.h3,{id:"compatibility-notes",children:"Compatibility Notes"}),"\n",(0,s.jsx)(n.p,{children:"Smoothieware uses different G-code syntax:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key differences:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"GRBL"}),(0,s.jsx)(n.th,{children:"Smoothieware"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Laser On"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"M4 S<value>"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"M3 S<value>"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Power Range"})}),(0,s.jsx)(n.td,{children:"0-1000"}),(0,s.jsx)(n.td,{children:"0.0-1.0 (float)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Status"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"<...>"})," format"]}),(0,s.jsx)(n.td,{children:"Different format"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Smoothieware with Rayforge:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select Smoothieware dialect"})," in machine settings > G-code > Dialect"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test with low power"})," first"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Verify power range"})," matches your config"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"No real-time status"})," - limited feedback"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Limitations:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Status reporting not fully compatible"}),"\n",(0,s.jsx)(n.li,{children:"Power scaling may differ"}),"\n",(0,s.jsx)(n.li,{children:"Settings ($$ commands) not supported"}),"\n",(0,s.jsx)(n.li,{children:"Untested on real hardware"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Recommendation:"})," If possible, use GRBL-compatible firmware instead."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"marlin",children:"Marlin"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Versions:"})," 2.0+ with laser support\n",(0,s.jsx)(n.strong,{children:"Driver:"})," GRBL Serial"]}),"\n",(0,s.jsx)(n.h3,{id:"marlin-for-laser",children:"Marlin for Laser"}),"\n",(0,s.jsx)(n.p,{children:"Marlin 2.0+ can control lasers when properly configured."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Marlin 2.0 or later"})," firmware"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Laser features enabled:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"#define LASER_FEATURE\n#define LASER_POWER_INLINE\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Correct power range"})," configured:\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"#define SPEED_POWER_MAX 1000\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Compatibility:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"M4 laser mode supported"}),"\n",(0,s.jsx)(n.li,{children:"Basic G-code (G0, G1, G2, G3)"}),"\n",(0,s.jsx)(n.li,{children:"Status reporting differs"}),"\n",(0,s.jsx)(n.li,{children:"Settings commands different"}),"\n",(0,s.jsx)(n.li,{children:"Air assist (M8/M9) may not work"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Marlin with Rayforge:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select Marlin dialect"})," in machine settings > G-code > Dialect"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configure Marlin"})," for laser use"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test power range"})," matches (0-1000 or 0-255)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limited testing"})," - use with caution"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Better alternative:"})," Use GRBL firmware on laser machines."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"firmware-upgrade-guide",children:"Firmware Upgrade Guide"}),"\n",(0,s.jsx)(n.h3,{id:"upgrading-to-grbl-11",children:"Upgrading to GRBL 1.1"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why upgrade?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Laser mode (M4) for constant power"}),"\n",(0,s.jsx)(n.li,{children:"Better status reporting"}),"\n",(0,s.jsx)(n.li,{children:"More reliable"}),"\n",(0,s.jsx)(n.li,{children:"Better Rayforge support"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"How to upgrade:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Identify your controller board:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Arduino Nano/Uno (ATmega328P)"}),"\n",(0,s.jsx)(n.li,{children:"Arduino Mega (ATmega2560)"}),"\n",(0,s.jsx)(n.li,{children:"Custom board"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Download GRBL 1.1:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/gnea/grbl/releases",children:"GRBL Releases"})}),"\n",(0,s.jsx)(n.li,{children:"Get latest 1.1 version (1.1h recommended)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Flash firmware:"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Arduino IDE:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1. Install Arduino IDE\n2. Open GRBL sketch (grbl.ino)\n3. Select correct board and port\n4. Upload\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using avrdude:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"avrdude -c arduino -p m328p -P /dev/ttyUSB0 \\\n        -U flash:w:grbl.hex:i\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configure GRBL:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Connect via serial"}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"$$"})," to view settings"]}),"\n",(0,s.jsx)(n.li,{children:"Configure for your machine"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"backup-before-upgrade",children:"Backup Before Upgrade"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Save your settings:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Connect to controller"}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"$$"})," command"]}),"\n",(0,s.jsx)(n.li,{children:"Copy all settings output"}),"\n",(0,s.jsx)(n.li,{children:"Save to file"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After upgrade:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Restore settings one-by-one: ",(0,s.jsx)(n.code,{children:"$0=10"}),", ",(0,s.jsx)(n.code,{children:"$1=25"}),", etc."]}),"\n",(0,s.jsx)(n.li,{children:"Or use defaults and reconfigure"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"controller-hardware",children:"Controller Hardware"}),"\n",(0,s.jsx)(n.h3,{id:"common-controllers",children:"Common Controllers"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Board"}),(0,s.jsx)(n.th,{children:"Typical Firmware"}),(0,s.jsx)(n.th,{children:"Rayforge Support"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Arduino CNC Shield"})}),(0,s.jsx)(n.td,{children:"GRBL 1.1"}),(0,s.jsx)(n.td,{children:"Excellent"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"MKS DLC32"})}),(0,s.jsx)(n.td,{children:"grblHAL"}),(0,s.jsx)(n.td,{children:"Excellent"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Cohesion3D"})}),(0,s.jsx)(n.td,{children:"Smoothieware"}),(0,s.jsx)(n.td,{children:"Limited"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SKR boards"})}),(0,s.jsx)(n.td,{children:"Marlin/grblHAL"}),(0,s.jsx)(n.td,{children:"Varies"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Ruida"})}),(0,s.jsx)(n.td,{children:"Proprietary"}),(0,s.jsx)(n.td,{children:"Not supported"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Trocen"})}),(0,s.jsx)(n.td,{children:"Proprietary"}),(0,s.jsx)(n.td,{children:"Not supported"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TopWisdom"})}),(0,s.jsx)(n.td,{children:"Proprietary"}),(0,s.jsx)(n.td,{children:"Not supported"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"recommended-controllers",children:"Recommended Controllers"}),"\n",(0,s.jsx)(n.p,{children:"For best Rayforge compatibility:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Arduino Nano + CNC Shield"})," (GRBL 1.1)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cheap (~$10-20)"}),"\n",(0,s.jsx)(n.li,{children:"Easy to flash"}),"\n",(0,s.jsx)(n.li,{children:"Well documented"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"MKS DLC32"})," (grblHAL)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Modern (ESP32-based)"}),"\n",(0,s.jsx)(n.li,{children:"WiFi capable"}),"\n",(0,s.jsx)(n.li,{children:"Active development"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Custom GRBL boards"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Many available on marketplaces"}),"\n",(0,s.jsx)(n.li,{children:"Check for GRBL 1.1+ support"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"firmware-configuration",children:"Firmware Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"grbl-settings-for-laser",children:"GRBL Settings for Laser"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Essential settings:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$30=1000    ; Max spindle/laser power (1000 = 100%)\n$31=0       ; Min spindle/laser power\n$32=1       ; Laser mode enabled (1 = on)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Machine settings:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$100=80     ; X steps/mm (calibrate for your machine)\n$101=80     ; Y steps/mm\n$110=3000   ; X max rate (mm/min)\n$111=3000   ; Y max rate\n$120=100    ; X acceleration (mm/sec)\n$121=100    ; Y acceleration\n$130=300    ; X max travel (mm)\n$131=200    ; Y max travel (mm)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Safety settings:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$20=1       ; Soft limits enabled\n$21=1       ; Hard limits enabled (if you have endstops)\n$22=1       ; Homing enabled\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testing-firmware",children:"Testing Firmware"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Basic test sequence:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Connection test:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Send: ?\nExpect: &lt;Idle|...&gt;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Version check:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Send: $I\nExpect: [VER:1.1...]\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Settings check:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Send: $$\nExpect: $0=..., $1=..., etc.\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Movement test:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Send: G91 G0 X10\nExpect: Machine moves 10mm in X\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Laser test (very low power):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Send: M4 S10\nExpect: Laser turns on (dim)\nSend: M5\nExpect: Laser turns off\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting-firmware-issues",children:"Troubleshooting Firmware Issues"}),"\n",(0,s.jsx)(n.h3,{id:"firmware-not-responding",children:"Firmware Not Responding"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No response to commands"}),"\n",(0,s.jsx)(n.li,{children:"Connection fails"}),"\n",(0,s.jsx)(n.li,{children:"Status not reported"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Diagnosis:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Check baud rate:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GRBL 1.1 default: 115200"}),"\n",(0,s.jsx)(n.li,{children:"GRBL 0.9: 9600"}),"\n",(0,s.jsx)(n.li,{children:"Try both"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Check USB cable:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Data cable, not charge-only"}),"\n",(0,s.jsx)(n.li,{children:"Replace with known-good cable"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Check port:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Linux: ",(0,s.jsx)(n.code,{children:"/dev/ttyUSB0"})," or ",(0,s.jsx)(n.code,{children:"/dev/ttyACM0"})]}),"\n",(0,s.jsx)(n.li,{children:"Windows: COM3, COM4, etc."}),"\n",(0,s.jsx)(n.li,{children:"Correct port selected in Rayforge"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Test with terminal:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use screen, minicom, or PuTTY"}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"?"})," and see if you get response"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"firmware-crashes",children:"Firmware Crashes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Controller locks up during job"}),"\n",(0,s.jsx)(n.li,{children:"Random disconnections"}),"\n",(0,s.jsx)(n.li,{children:"Inconsistent behavior"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Possible causes:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Buffer overflow"})," - G-code file too complex"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Electrical noise"})," - Poor grounding or EMI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Firmware bug"})," - Upgrade to latest version"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hardware issue"})," - Faulty controller"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Upgrade firmware to latest stable version"}),"\n",(0,s.jsx)(n.li,{children:"Simplify G-code (reduce precision, fewer segments)"}),"\n",(0,s.jsx)(n.li,{children:"Add ferrite beads to USB cable"}),"\n",(0,s.jsx)(n.li,{children:"Improve grounding and cable routing"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"wrong-firmware",children:"Wrong Firmware"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Commands rejected"}),"\n",(0,s.jsx)(n.li,{children:"Unexpected behavior"}),"\n",(0,s.jsx)(n.li,{children:"Error messages"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Query firmware version: ",(0,s.jsx)(n.code,{children:"$I"})]}),"\n",(0,s.jsx)(n.li,{children:"Compare with Rayforge expectations"}),"\n",(0,s.jsx)(n.li,{children:"Upgrade or select correct dialect"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"future-firmware-support",children:"Future Firmware Support"}),"\n",(0,s.jsx)(n.h3,{id:"requested-features",children:"Requested Features"}),"\n",(0,s.jsx)(n.p,{children:"Users have requested support for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ruida controllers"})," - Chinese laser controllers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trocen/AWC"})," - Commercial laser controllers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ESP32 WiFi"})," - Network connectivity for grblHAL"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Laser API"})," - Direct machine API (no G-code)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Status:"})," Not currently supported. Feature requests welcome on GitHub."]}),"\n",(0,s.jsx)(n.h3,{id:"contributing",children:"Contributing"}),"\n",(0,s.jsx)(n.p,{children:"To add firmware support:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Implement driver in ",(0,s.jsx)(n.code,{children:"rayforge/machine/driver/"})]}),"\n",(0,s.jsxs)(n.li,{children:["Define G-code dialect in ",(0,s.jsx)(n.code,{children:"rayforge/machine/models/dialect.py"})]}),"\n",(0,s.jsx)(n.li,{children:"Test thoroughly on real hardware"}),"\n",(0,s.jsx)(n.li,{children:"Submit pull request with documentation"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-pages",children:"Related Pages"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"gcode-dialects",children:"G-code Dialects"})," - Dialect details"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../machine/device",children:"Device Settings"})," - GRBL configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../troubleshooting/connection",children:"Connection Issues"})," - Connection troubleshooting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../machine/general",children:"General Settings"})," - Machine setup"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453(e,n,r){r.d(n,{R:()=>d,x:()=>c});var i=r(96540);const s={},l=i.createContext(s);function d(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);